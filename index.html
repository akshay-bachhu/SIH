<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Classroom & Timetable Scheduler</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #4a6fdc;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --light-bg: #f8f9fa;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: #333;
        }
        
        .navbar {
            background-color: var(--primary-color);
            box-shadow: var(--card-shadow);
        }
        
        .navbar-brand {
            font-weight: 600;
            font-size: 1.5rem;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: #3a5bc9;
            border-color: #3a5bc9;
        }
        
        .timetable-grid {
            display: grid;
            grid-template-columns: 80px repeat(5, 1fr);
            grid-template-rows: 40px repeat(8, 1fr);
            gap: 1px;
            background-color: #ddd;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .timetable-header {
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .timetable-time {
            background-color: #f1f1f1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
        }
        
        .timetable-cell {
            background-color: white;
            padding: 5px;
            font-size: 0.8rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 60px;
        }
        
        .timetable-cell.assigned {
            background-color: #e7f3ff;
            border-left: 4px solid var(--primary-color);
        }
        
        .timetable-cell.lab {
            background-color: #fff4e6;
            border-left: 4px solid #ff9800;
        }
        
        .timetable-cell.elective {
            background-color: #f3e5f5;
            border-left: 4px solid #9c27b0;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
        }
        
        .dashboard-section {
            display: none;
        }
        
        .dashboard-section.active {
            display: block;
        }
        
        .parameter-form {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .optimization-metric {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .optimization-metric i {
            font-size: 1.5rem;
            margin-right: 10px;
            color: var(--primary-color);
        }
        
        .metric-value {
            font-weight: 600;
            font-size: 1.2rem;
            margin-left: auto;
        }
        
        .suggestion-card {
            border-left: 4px solid var(--success-color);
            background-color: #f8fff9;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 5px 5px 0;
        }
        
        .approval-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .timetable-option {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .timetable-option:hover {
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .timetable-option.selected {
            border: 2px solid var(--primary-color);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 5px;
            border-radius: 3px;
        }
        
        .faculty-card {
            transition: all 0.3s;
            cursor: pointer;
            border-left: 4px solid var(--primary-color);
        }
        
        .faculty-card:hover {
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .subject-tag {
            display: inline-block;
            background-color: #e9ecef;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .availability-indicator {
            height: 8px;
            border-radius: 4px;
            margin-top: 8px;
        }
        
        .availability-high {
            background-color: var(--success-color);
        }
        
        .availability-medium {
            background-color: #ffc107;
        }
        
        .availability-low {
            background-color: #dc3545;
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
        }
        
        .modal-header .btn-close {
            filter: brightness(0) invert(1);
        }
        
        .faculty-actions {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        
        .faculty-actions .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-calendar2-range me-2"></i>Smart Timetable Scheduler
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="dashboard-link">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="parameters-link">Parameters</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="faculty-link">Faculty Management</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="generate-link">Generate Timetable</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="review-link">Review & Approve</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="logout-link">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Login Section -->
    <div class="container login-container" id="login-section">
        <div class="card">
            <div class="card-header text-center">
                <h4>Login to Timetable Scheduler</h4>
            </div>
            <div class="card-body">
                <form id="login-form">
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" required>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Login</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div class="container mt-4 dashboard-section" id="dashboard-section">
        <h2 class="mb-4">Dashboard</h2>
        
        <div class="row">
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-building fs-1 text-primary"></i>
                        <h5 class="card-title mt-2">Classrooms</h5>
                        <p class="card-text fs-3" id="classroom-count">24</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-people fs-1 text-success"></i>
                        <h5 class="card-title mt-2">Batches</h5>
                        <p class="card-text fs-3" id="batch-count">18</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-book fs-1 text-warning"></i>
                        <h5 class="card-title mt-2">Subjects</h5>
                        <p class="card-text fs-3" id="subject-count">42</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-person-workspace fs-1 text-info"></i>
                        <h5 class="card-title mt-2">Faculties</h5>
                        <p class="card-text fs-3" id="faculty-count">32</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Current Timetable</h5>
                        <span class="approval-status status-approved">Approved</span>
                    </div>
                    <div class="card-body">
                        <div class="timetable-grid" id="current-timetable">
                            <!-- Timetable will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Optimization Metrics</h5>
                    </div>
                    <div class="card-body">
                        <div class="optimization-metric">
                            <i class="bi bi-building"></i>
                            <span>Classroom Utilization</span>
                            <span class="metric-value">87%</span>
                        </div>
                        <div class="optimization-metric">
                            <i class="bi bi-person-workspace"></i>
                            <span>Faculty Workload Balance</span>
                            <span class="metric-value">92%</span>
                        </div>
                        <div class="optimization-metric">
                            <i class="bi bi-calendar-check"></i>
                            <span>Student Gap Hours</span>
                            <span class="metric-value">1.2 hrs/day</span>
                        </div>
                        <div class="optimization-metric">
                            <i class="bi bi-check-circle"></i>
                            <span>Constraints Satisfied</span>
                            <span class="metric-value">98%</span>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">Recent Activities</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Timetable generated for CSE Dept.</span>
                                <small class="text-muted">2 hours ago</small>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Parameters updated for ECE Batch</span>
                                <small class="text-muted">5 hours ago</small>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>New faculty added: Dr. Emily Watson</span>
                                <small class="text-muted">Yesterday</small>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Parameters Section -->
    <div class="container mt-4 dashboard-section" id="parameters-section">
        <h2 class="mb-4">Scheduling Parameters</h2>
        
        <div class="card parameter-form">
            <div class="card-header">
                <h5 class="mb-0">Institution Parameters</h5>
            </div>
            <div class="card-body">
                <form id="parameters-form">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="num-classrooms" class="form-label">Number of Classrooms</label>
                            <input type="number" class="form-control" id="num-classrooms" value="24" min="1">
                        </div>
                        <div class="col-md-6">
                            <label for="num-batches" class="form-label">Number of Batches</label>
                            <input type="number" class="form-control" id="num-batches" value="18" min="1">
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="num-subjects" class="form-label">Number of Subjects</label>
                            <input type="number" class="form-control" id="num-subjects" value="42" min="1">
                        </div>
                        <div class="col-md-6">
                            <label for="max-classes-per-day" class="form-label">Maximum Classes Per Day</label>
                            <input type="number" class="form-control" id="max-classes-per-day" value="6" min="1" max="10">
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="num-faculties" class="form-label">Number of Faculties</label>
                            <input type="number" class="form-control" id="num-faculties" value="32" min="1" readonly>
                        </div>
                        <div class="col-md-6">
                            <label for="avg-leaves" class="form-label">Average Leaves Per Faculty (Monthly)</label>
                            <input type="number" class="form-control" id="avg-leaves" value="2" min="0" max="10">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Special Classes with Fixed Slots</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="lab-classes" checked>
                            <label class="form-check-label" for="lab-classes">
                                Laboratory Sessions
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="elective-classes" checked>
                            <label class="form-check-label" for="elective-classes">
                                Elective Courses
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="seminar-classes">
                            <label class="form-check-label" for="seminar-classes">
                                Seminars & Workshops
                            </label>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary" id="reset-params">Reset to Defaults</button>
                        <button type="submit" class="btn btn-primary">Save Parameters</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">Advanced Configuration</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Department Settings</h6>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Computer Science Engineering
                                <span class="badge bg-primary rounded-pill">8 batches</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Electronics & Communication
                                <span class="badge bg-primary rounded-pill">6 batches</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Mechanical Engineering
                                <span class="badge bg-primary rounded-pill">4 batches</span>
                            </li>
                        </ul>
                        <button class="btn btn-sm btn-outline-primary mt-2">Add Department</button>
                    </div>
                    <div class="col-md-6">
                        <h6>Shift Settings</h6>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Morning Shift
                                <span class="badge bg-success rounded-pill">8:00 AM - 12:00 PM</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Afternoon Shift
                                <span class="badge bg-warning rounded-pill">1:00 PM - 5:00 PM</span>
                            </li>
                        </ul>
                        <button class="btn btn-sm btn-outline-primary mt-2">Configure Shifts</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Faculty Management Section -->
    <div class="container mt-4 dashboard-section" id="faculty-section">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Faculty Management</h2>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#facultyModal">
                <i class="bi bi-plus-circle me-2"></i>Add New Faculty
            </button>
        </div>
        
        <div class="row" id="faculty-container">
            <!-- Faculty cards will be generated here -->
        </div>
    </div>

    <!-- Generate Timetable Section -->
    <div class="container mt-4 dashboard-section" id="generate-section">
        <h2 class="mb-4">Generate Timetable</h2>
        
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Optimization Preferences</h5>
            </div>
            <div class="card-body">
                <form id="optimization-form">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Primary Optimization Goal</label>
                            <select class="form-select" id="primary-goal">
                                <option value="utilization">Maximize Classroom Utilization</option>
                                <option value="workload">Balance Faculty Workload</option>
                                <option value="gaps">Minimize Student Gap Hours</option>
                                <option value="constraints">Satisfy All Constraints</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Secondary Optimization Goal</label>
                            <select class="form-select" id="secondary-goal">
                                <option value="utilization">Maximize Classroom Utilization</option>
                                <option value="workload" selected>Balance Faculty Workload</option>
                                <option value="gaps">Minimize Student Gap Hours</option>
                                <option value="constraints">Satisfy All Constraints</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Department</label>
                            <select class="form-select" id="department-select">
                                <option value="all">All Departments</option>
                                <option value="cse">Computer Science Engineering</option>
                                <option value="ece">Electronics & Communication</option>
                                <option value="me">Mechanical Engineering</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Semester</label>
                            <select class="form-select" id="semester-select">
                                <option value="all">All Semesters</option>
                                <option value="odd">Odd Semester</option>
                                <option value="even">Even Semester</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Number of Timetable Options to Generate</label>
                        <input type="range" class="form-range" id="num-options" min="1" max="5" value="3">
                        <div class="d-flex justify-content-between">
                            <span>1</span>
                            <span id="num-options-value">3</span>
                            <span>5</span>
                        </div>
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Generate Timetable Options</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card mt-4" id="timetable-options" style="display: none;">
            <div class="card-header">
                <h5 class="mb-0">Generated Timetable Options</h5>
            </div>
            <div class="card-body">
                <div class="row" id="options-container">
                    <!-- Timetable options will be generated here -->
                </div>
                
                <div class="mt-4 text-center">
                    <button class="btn btn-secondary me-2" id="regenerate-timetable">Regenerate Options</button>
                    <button class="btn btn-primary" id="proceed-to-review">Proceed to Review</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Review & Approve Section -->
    <div class="container mt-4 dashboard-section" id="review-section">
        <h2 class="mb-4">Review & Approve Timetable</h2>
        
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Timetable for Review</h5>
                <span class="approval-status status-pending">Pending Approval</span>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h6>Department: Computer Science Engineering</h6>
                        <h6>Semester: Odd Semester (2023-24)</h6>
                    </div>
                    <div class="col-md-6 text-end">
                        <h6>Generated: Oct 15, 2023</h6>
                        <h6>Option: Option 2</h6>
                    </div>
                </div>
                
                <div class="timetable-grid" id="review-timetable">
                    <!-- Timetable will be generated here -->
                </div>
                
                <div class="row mt-4">
                    <div class="col-md-8">
                        <h5>Conflict Analysis</h5>
                        <div class="suggestion-card">
                            <h6>No Major Conflicts Detected</h6>
                            <p>The generated timetable satisfies all constraints with minimal conflicts. Only 2 minor adjustments suggested for better optimization.</p>
                        </div>
                        
                        <h5 class="mt-4">Optimization Suggestions</h5>
                        <div class="suggestion-card">
                            <h6><i class="bi bi-lightbulb"></i> Faculty Workload Balancing</h6>
                            <p>Dr. Smith has 4 consecutive classes on Wednesday. Consider redistributing one class to Friday to improve workload balance.</p>
                        </div>
                        <div class="suggestion-card">
                            <h6><i class="bi bi-lightbulb"></i> Classroom Utilization</h6>
                            <p>Lab 301 is underutilized (only 40% occupancy). Move some theory sessions to this lab when not in use for practicals.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <h5>Approval Actions</h5>
                        <div class="d-grid gap-2">
                            <button class="btn btn-success" id="approve-timetable">
                                <i class="bi bi-check-circle me-2"></i>Approve Timetable
                            </button>
                            <button class="btn btn-warning" id="request-changes">
                                <i class="bi bi-arrow-clockwise me-2"></i>Request Changes
                            </button>
                            <button class="btn btn-danger" id="reject-timetable">
                                <i class="bi bi-x-circle me-2"></i>Reject Timetable
                            </button>
                        </div>
                        
                        <div class="mt-4">
                            <h5>Comments</h5>
                            <textarea class="form-control" rows="4" placeholder="Add your comments here..."></textarea>
                            <button class="btn btn-primary mt-2 w-100">Submit Comments</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Faculty Modal -->
    <div class="modal fade" id="facultyModal" tabindex="-1" aria-labelledby="facultyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="facultyModalLabel">Add New Faculty</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="faculty-form">
                        <input type="hidden" id="faculty-id">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="faculty-name" class="form-label">Faculty Name</label>
                                <input type="text" class="form-control" id="faculty-name" required>
                            </div>
                            <div class="col-md-6">
                                <label for="faculty-department" class="form-label">Department</label>
                                <select class="form-select" id="faculty-department" required>
                                    <option value="">Select Department</option>
                                    <option value="cse">Computer Science Engineering</option>
                                    <option value="ece">Electronics & Communication</option>
                                    <option value="me">Mechanical Engineering</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="faculty-classes" class="form-label">Classes Per Week</label>
                                <input type="number" class="form-control" id="faculty-classes" min="1" max="30" required>
                            </div>
                            <div class="col-md-6">
                                <label for="faculty-leaves" class="form-label">Average Leaves (Monthly)</label>
                                <input type="number" class="form-control" id="faculty-leaves" min="0" max="10" value="2">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="faculty-subjects" class="form-label">Subjects (comma separated)</label>
                            <input type="text" class="form-control" id="faculty-subjects" placeholder="e.g., Mathematics, Physics, Statistics" required>
                            <div class="form-text">Enter subjects separated by commas</div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Availability</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="monday-avail" checked>
                                        <label class="form-check-label" for="monday-avail">Monday</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="tuesday-avail" checked>
                                        <label class="form-check-label" for="tuesday-avail">Tuesday</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="wednesday-avail" checked>
                                        <label class="form-check-label" for="wednesday-avail">Wednesday</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="thursday-avail" checked>
                                        <label class="form-check-label" for="thursday-avail">Thursday</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="friday-avail" checked>
                                        <label class="form-check-label" for="friday-avail">Friday</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="saturday-avail">
                                        <label class="form-check-label" for="saturday-avail">Saturday</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-faculty">Save Faculty</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample faculty data
            let facultyData = [
                { id: 1, name: "Dr. Smith", department: "cse", subjects: ["Mathematics", "Statistics"], classesPerWeek: 12, avgLeaves: 2, availability: ["monday", "tuesday", "wednesday", "thursday", "friday"] },
                { id: 2, name: "Dr. Johnson", department: "cse", subjects: ["Physics", "Electronics"], classesPerWeek: 10, avgLeaves: 1, availability: ["monday", "tuesday", "wednesday", "thursday", "friday"] },
                { id: 3, name: "Prof. Williams", department: "cse", subjects: ["Programming", "Data Structures"], classesPerWeek: 15, avgLeaves: 3, availability: ["monday", "tuesday", "wednesday", "thursday", "friday"] },
                { id: 4, name: "Dr. Brown", department: "ece", subjects: ["Electronics", "Signal Processing"], classesPerWeek: 8, avgLeaves: 2, availability: ["monday", "tuesday", "wednesday", "thursday"] },
                { id: 5, name: "Prof. Davis", department: "cse", subjects: ["Data Structures", "Algorithms"], classesPerWeek: 14, avgLeaves: 1, availability: ["monday", "tuesday", "wednesday", "thursday", "friday"] },
                { id: 6, name: "Dr. Miller", department: "cse", subjects: ["Artificial Intelligence", "Machine Learning"], classesPerWeek: 6, avgLeaves: 2, availability: ["tuesday", "thursday", "friday"] },
                { id: 7, name: "Prof. Garcia", department: "cse", subjects: ["Machine Learning", "Deep Learning"], classesPerWeek: 8, avgLeaves: 1, availability: ["monday", "wednesday", "friday"] },
                { id: 8, name: "Dr. Wilson", department: "me", subjects: ["Thermodynamics", "Fluid Mechanics"], classesPerWeek: 10, avgLeaves: 2, availability: ["monday", "tuesday", "wednesday", "thursday", "friday"] }
            ];

            // Sample timetable data
            const timetableData = [
                { time: "9:00-10:00", monday: { subject: "Mathematics", faculty: "Dr. Smith", room: "A101", type: "theory" }, tuesday: { subject: "Physics", faculty: "Dr. Johnson", room: "B201", type: "theory" }, wednesday: { subject: "Programming", faculty: "Prof. Williams", room: "Lab 301", type: "lab" }, thursday: { subject: "Electronics", faculty: "Dr. Brown", room: "C102", type: "theory" }, friday: { subject: "Mathematics", faculty: "Dr. Smith", room: "A101", type: "theory" } },
                { time: "10:00-11:00", monday: { subject: "Physics", faculty: "Dr. Johnson", room: "B201", type: "theory" }, tuesday: { subject: "Mathematics", faculty: "Dr. Smith", room: "A101", type: "theory" }, wednesday: { subject: "Programming", faculty: "Prof. Williams", room: "Lab 301", type: "lab" }, thursday: { subject: "Data Structures", faculty: "Prof. Davis", room: "D203", type: "theory" }, friday: { subject: "Electronics", faculty: "Dr. Brown", room: "C102", type: "theory" } },
                { time: "11:00-12:00", monday: { subject: "Electronics", faculty: "Dr. Brown", room: "C102", type: "theory" }, tuesday: { subject: "Data Structures", faculty: "Prof. Davis", room: "D203", type: "theory" }, wednesday: { subject: "Free Period", faculty: "", room: "", type: "free" }, thursday: { subject: "Mathematics", faculty: "Dr. Smith", room: "A101", type: "theory" }, friday: { subject: "Physics", faculty: "Dr. Johnson", room: "B201", type: "theory" } },
                { time: "12:00-1:00", monday: { subject: "Lunch Break", faculty: "", room: "", type: "break" }, tuesday: { subject: "Lunch Break", faculty: "", room: "", type: "break" }, wednesday: { subject: "Lunch Break", faculty: "", room: "", type: "break" }, thursday: { subject: "Lunch Break", faculty: "", room: "", type: "break" }, friday: { subject: "Lunch Break", faculty: "", room: "", type: "break" } },
                { time: "1:00-2:00", monday: { subject: "Programming", faculty: "Prof. Williams", room: "Lab 301", type: "lab" }, tuesday: { subject: "Elective: AI", faculty: "Dr. Miller", room: "E105", type: "elective" }, wednesday: { subject: "Physics", faculty: "Dr. Johnson", room: "B201", type: "theory" }, thursday: { subject: "Electronics", faculty: "Dr. Brown", room: "C102", type: "theory" }, friday: { subject: "Data Structures", faculty: "Prof. Davis", room: "D203", type: "theory" } },
                { time: "2:00-3:00", monday: { subject: "Programming", faculty: "Prof. Williams", room: "Lab 301", type: "lab" }, tuesday: { subject: "Elective: AI", faculty: "Dr. Miller", room: "E105", type: "elective" }, wednesday: { subject: "Data Structures", faculty: "Prof. Davis", room: "D203", type: "theory" }, thursday: { subject: "Free Period", faculty: "", room: "", type: "free" }, friday: { subject: "Elective: ML", faculty: "Prof. Garcia", room: "F204", type: "elective" } },
                { time: "3:00-4:00", monday: { subject: "Free Period", faculty: "", room: "", type: "free" }, tuesday: { subject: "Free Period", faculty: "", room: "", type: "free" }, wednesday: { subject: "Mathematics", faculty: "Dr. Smith", room: "A101", type: "theory" }, thursday: { subject: "Physics", faculty: "Dr. Johnson", room: "B201", type: "theory" }, friday: { subject: "Elective: ML", faculty: "Prof. Garcia", room: "F204", type: "elective" } },
                { time: "4:00-5:00", monday: { subject: "Free Period", faculty: "", room: "", type: "free" }, tuesday: { subject: "Free Period", faculty: "", room: "", type: "free" }, wednesday: { subject: "Free Period", faculty: "", room: "", type: "free" }, thursday: { subject: "Free Period", faculty: "", room: "", type: "free" }, friday: { subject: "Free Period", faculty: "", room: "", type: "free" } }
            ];

            // Generate timetable HTML
            function generateTimetable(containerId) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                
                // Add headers
                const headerRow = document.createElement('div');
                headerRow.className = 'timetable-header';
                headerRow.style.gridColumn = '1 / 7';
                headerRow.textContent = 'Timetable for CSE - 3rd Semester';
                container.appendChild(headerRow);
                
                // Add day headers
                const days = ['', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
                days.forEach(day => {
                    const dayHeader = document.createElement('div');
                    dayHeader.className = 'timetable-header';
                    dayHeader.textContent = day;
                    container.appendChild(dayHeader);
                });
                
                // Add timetable cells
                timetableData.forEach(period => {
                    // Time slot
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'timetable-time';
                    timeSlot.textContent = period.time;
                    container.appendChild(timeSlot);
                    
                    // Day cells
                    ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'].forEach(day => {
                        const cell = document.createElement('div');
                        cell.className = 'timetable-cell';
                        
                        const dayData = period[day];
                        if (dayData.subject !== "Free Period" && dayData.subject !== "Lunch Break") {
                            cell.classList.add('assigned');
                            if (dayData.type === 'lab') cell.classList.add('lab');
                            if (dayData.type === 'elective') cell.classList.add('elective');
                            
                            cell.innerHTML = `
                                <strong>${dayData.subject}</strong>
                                <div>${dayData.faculty}</div>
                                <div>${dayData.room}</div>
                            `;
                        } else if (dayData.subject === "Lunch Break") {
                            cell.innerHTML = `<strong>${dayData.subject}</strong>`;
                            cell.style.backgroundColor = '#fff8e1';
                        } else {
                            cell.innerHTML = `<strong>${dayData.subject}</strong>`;
                        }
                        
                        container.appendChild(cell);
                    });
                });
                
                // Add legend
                const legendContainer = document.createElement('div');
                legendContainer.className = 'mt-3 d-flex flex-wrap';
                legendContainer.innerHTML = `
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e7f3ff; border-left: 4px solid var(--primary-color);"></div>
                        <span>Theory Class</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #fff4e6; border-left: 4px solid #ff9800;"></div>
                        <span>Lab Session</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f3e5f5; border-left: 4px solid #9c27b0;"></div>
                        <span>Elective Course</span>
                    </div>
                `;
                container.appendChild(legendContainer);
            }

            // Generate faculty cards
            function generateFacultyCards() {
                const container = document.getElementById('faculty-container');
                container.innerHTML = '';
                
                facultyData.forEach(faculty => {
                    const card = document.createElement('div');
                    card.className = 'col-md-4 mb-4';
                    
                    const availabilityPercentage = (faculty.availability.length / 6) * 100;
                    let availabilityClass = 'availability-high';
                    if (availabilityPercentage < 70) availabilityClass = 'availability-medium';
                    if (availabilityPercentage < 40) availabilityClass = 'availability-low';
                    
                    card.innerHTML = `
                        <div class="card faculty-card h-100 position-relative" data-id="${faculty.id}">
                            <div class="faculty-actions">
                                <button class="btn btn-sm btn-outline-primary me-1 edit-faculty" data-id="${faculty.id}">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger delete-faculty" data-id="${faculty.id}">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">${faculty.name}</h5>
                                <h6 class="card-subtitle mb-2 text-muted">${getDepartmentName(faculty.department)}</h6>
                                
                                <div class="mb-3">
                                    <strong>Subjects:</strong>
                                    <div class="mt-1">
                                        ${faculty.subjects.map(subject => `<span class="subject-tag">${subject}</span>`).join('')}
                                    </div>
                                </div>
                                
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small><strong>Classes/Week:</strong> ${faculty.classesPerWeek}</small>
                                    </div>
                                    <div class="col-6">
                                        <small><strong>Avg. Leaves:</strong> ${faculty.avgLeaves}/month</small>
                                    </div>
                                </div>
                                
                                <div class="mb-2">
                                    <small><strong>Availability:</strong> ${availabilityPercentage.toFixed(0)}%</small>
                                    <div class="availability-indicator ${availabilityClass}"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
                
                // Update faculty count
                document.getElementById('faculty-count').textContent = facultyData.length;
                document.getElementById('num-faculties').value = facultyData.length;
                
                // Add event listeners to edit and delete buttons
                document.querySelectorAll('.edit-faculty').forEach(button => {
                    button.addEventListener('click', function() {
                        const facultyId = parseInt(this.getAttribute('data-id'));
                        editFaculty(facultyId);
                    });
                });
                
                document.querySelectorAll('.delete-faculty').forEach(button => {
                    button.addEventListener('click', function() {
                        const facultyId = parseInt(this.getAttribute('data-id'));
                        deleteFaculty(facultyId);
                    });
                });
            }

            // Get department name from code
            function getDepartmentName(deptCode) {
                const departments = {
                    'cse': 'Computer Science Engineering',
                    'ece': 'Electronics & Communication',
                    'me': 'Mechanical Engineering'
                };
                return departments[deptCode] || deptCode;
            }

            // Edit faculty
            function editFaculty(facultyId) {
                const faculty = facultyData.find(f => f.id === facultyId);
                if (!faculty) return;
                
                document.getElementById('facultyModalLabel').textContent = 'Edit Faculty';
                document.getElementById('faculty-id').value = faculty.id;
                document.getElementById('faculty-name').value = faculty.name;
                document.getElementById('faculty-department').value = faculty.department;
                document.getElementById('faculty-classes').value = faculty.classesPerWeek;
                document.getElementById('faculty-leaves').value = faculty.avgLeaves;
                document.getElementById('faculty-subjects').value = faculty.subjects.join(', ');
                
                // Set availability checkboxes
                document.getElementById('monday-avail').checked = faculty.availability.includes('monday');
                document.getElementById('tuesday-avail').checked = faculty.availability.includes('tuesday');
                document.getElementById('wednesday-avail').checked = faculty.availability.includes('wednesday');
                document.getElementById('thursday-avail').checked = faculty.availability.includes('thursday');
                document.getElementById('friday-avail').checked = faculty.availability.includes('friday');
                document.getElementById('saturday-avail').checked = faculty.availability.includes('saturday');
                
                const modal = new bootstrap.Modal(document.getElementById('facultyModal'));
                modal.show();
            }

            // Delete faculty
            function deleteFaculty(facultyId) {
                if (confirm('Are you sure you want to delete this faculty?')) {
                    facultyData = facultyData.filter(f => f.id !== facultyId);
                    generateFacultyCards();
                }
            }

            // Initialize timetables
            generateTimetable('current-timetable');
            generateTimetable('review-timetable');
            generateFacultyCards();

            // Login functionality
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                // Simple authentication (in real app, this would be server-side)
                if (username && password) {
                    document.getElementById('login-section').style.display = 'none';
                    document.getElementById('dashboard-section').classList.add('active');
                }
            });

            // Navigation
            document.getElementById('dashboard-link').addEventListener('click', function(e) {
                e.preventDefault();
                showSection('dashboard-section');
            });

            document.getElementById('parameters-link').addEventListener('click', function(e) {
                e.preventDefault();
                showSection('parameters-section');
            });

            document.getElementById('faculty-link').addEventListener('click', function(e) {
                e.preventDefault();
                showSection('faculty-section');
            });

            document.getElementById('generate-link').addEventListener('click', function(e) {
                e.preventDefault();
                showSection('generate-section');
            });

            document.getElementById('review-link').addEventListener('click', function(e) {
                e.preventDefault();
                showSection('review-section');
            });

            document.getElementById('logout-link').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('login-section').style.display = 'block';
                document.querySelectorAll('.dashboard-section').forEach(section => {
                    section.classList.remove('active');
                });
            });

            function showSection(sectionId) {
                document.querySelectorAll('.dashboard-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');
            }

            // Parameters form
            document.getElementById('parameters-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // In a real app, this would save to a database
                alert('Parameters saved successfully!');
            });

            document.getElementById('reset-params').addEventListener('click', function() {
                document.getElementById('num-classrooms').value = 24;
                document.getElementById('num-batches').value = 18;
                document.getElementById('num-subjects').value = 42;
                document.getElementById('max-classes-per-day').value = 6;
                document.getElementById('avg-leaves').value = 2;
                document.getElementById('lab-classes').checked = true;
                document.getElementById('elective-classes').checked = true;
                document.getElementById('seminar-classes').checked = false;
            });

            // Faculty form
            document.getElementById('save-faculty').addEventListener('click', function() {
                const facultyId = document.getElementById('faculty-id').value;
                const name = document.getElementById('faculty-name').value;
                const department = document.getElementById('faculty-department').value;
                const classesPerWeek = parseInt(document.getElementById('faculty-classes').value);
                const avgLeaves = parseInt(document.getElementById('faculty-leaves').value);
                const subjectsInput = document.getElementById('faculty-subjects').value;
                
                // Parse subjects
                const subjects = subjectsInput.split(',').map(s => s.trim()).filter(s => s);
                
                // Get availability
                const availability = [];
                if (document.getElementById('monday-avail').checked) availability.push('monday');
                if (document.getElementById('tuesday-avail').checked) availability.push('tuesday');
                if (document.getElementById('wednesday-avail').checked) availability.push('wednesday');
                if (document.getElementById('thursday-avail').checked) availability.push('thursday');
                if (document.getElementById('friday-avail').checked) availability.push('friday');
                if (document.getElementById('saturday-avail').checked) availability.push('saturday');
                
                if (facultyId) {
                    // Update existing faculty
                    const index = facultyData.findIndex(f => f.id == facultyId);
                    if (index !== -1) {
                        facultyData[index] = {
                            ...facultyData[index],
                            name,
                            department,
                            classesPerWeek,
                            avgLeaves,
                            subjects,
                            availability
                        };
                    }
                } else {
                    // Add new faculty
                    const newId = facultyData.length > 0 ? Math.max(...facultyData.map(f => f.id)) + 1 : 1;
                    facultyData.push({
                        id: newId,
                        name,
                        department,
                        classesPerWeek,
                        avgLeaves,
                        subjects,
                        availability
                    });
                }
                
                // Close modal and refresh faculty list
                const modal = bootstrap.Modal.getInstance(document.getElementById('facultyModal'));
                modal.hide();
                generateFacultyCards();
                
                // Reset form
                document.getElementById('faculty-form').reset();
                document.getElementById('faculty-id').value = '';
                document.getElementById('facultyModalLabel').textContent = 'Add New Faculty';
            });

            // Reset faculty form when modal is closed
            document.getElementById('facultyModal').addEventListener('hidden.bs.modal', function() {
                document.getElementById('faculty-form').reset();
                document.getElementById('faculty-id').value = '';
                document.getElementById('facultyModalLabel').textContent = 'Add New Faculty';
            });

            // Optimization form
            document.getElementById('optimization-form').addEventListener('submit', function(e) {
                e.preventDefault();
                document.getElementById('timetable-options').style.display = 'block';
                
                // Generate timetable options
                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = '';
                
                const numOptions = document.getElementById('num-options').value;
                
                for (let i = 1; i <= numOptions; i++) {
                    const optionCard = document.createElement('div');
                    optionCard.className = 'col-md-4 mb-3';
                    optionCard.innerHTML = `
                        <div class="card timetable-option" data-option="${i}">
                            <div class="card-header">
                                <h5 class="mb-0">Option ${i}</h5>
                            </div>
                            <div class="card-body">
                                <div class="optimization-metric">
                                    <i class="bi bi-building"></i>
                                    <span>Classroom Utilization</span>
                                    <span class="metric-value">${85 + i}%</span>
                                </div>
                                <div class="optimization-metric">
                                    <i class="bi bi-person-workspace"></i>
                                    <span>Faculty Workload Balance</span>
                                    <span class="metric-value">${88 + i}%</span>
                                </div>
                                <div class="optimization-metric">
                                    <i class="bi bi-calendar-check"></i>
                                    <span>Student Gap Hours</span>
                                    <span class="metric-value">${(2.5 - (i * 0.3)).toFixed(1)} hrs/day</span>
                                </div>
                                <div class="optimization-metric">
                                    <i class="bi bi-check-circle"></i>
                                    <span>Constraints Satisfied</span>
                                    <span class="metric-value">${95 + i}%</span>
                                </div>
                            </div>
                        </div>
                    `;
                    optionsContainer.appendChild(optionCard);
                }
                
                // Add click event to select option
                document.querySelectorAll('.timetable-option').forEach(option => {
                    option.addEventListener('click', function() {
                        document.querySelectorAll('.timetable-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        this.classList.add('selected');
                    });
                });
            });

            // Range slider for number of options
            document.getElementById('num-options').addEventListener('input', function() {
                document.getElementById('num-options-value').textContent = this.value;
            });

            // Regenerate timetable
            document.getElementById('regenerate-timetable').addEventListener('click', function() {
                document.getElementById('optimization-form').dispatchEvent(new Event('submit'));
            });

            // Proceed to review
            document.getElementById('proceed-to-review').addEventListener('click', function() {
                const selectedOption = document.querySelector('.timetable-option.selected');
                if (selectedOption) {
                    showSection('review-section');
                } else {
                    alert('Please select a timetable option first');
                }
            });

            // Approval actions
            document.getElementById('approve-timetable').addEventListener('click', function() {
                const statusElement = document.querySelector('.approval-status');
                statusElement.textContent = 'Approved';
                statusElement.className = 'approval-status status-approved';
                alert('Timetable approved successfully!');
            });

            document.getElementById('request-changes').addEventListener('click', function() {
                alert('Change request sent to the scheduling team!');
            });

            document.getElementById('reject-timetable').addEventListener('click', function() {
                const statusElement = document.querySelector('.approval-status');
                statusElement.textContent = 'Rejected';
                statusElement.className = 'approval-status status-rejected';
                alert('Timetable rejected!');
            });
        });
    </script>
</body>
</html>
